<div class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title"><i class="fa fa-clock-o fa-fw"></i> Lista de obras</h3>
    </div>
    <div class="panel-body">
        
      <div class="row">
        <div class="col-xs-12" style="margin-bottom: 20px;">
            <img ng-src="{{booklist.user.profileImageURL}}" alt="{{booklist.user.displayName}}" class="header-profile-image" />
            <span ng-bind="booklist.user.displayName"></span>
            <i class="fa fa-calendar fa-2x"></i> <span ng-bind="booklist.created | date:'dd/MM/yyyy'"></span>
            <a tooltip="Editar lista" tooltip-placement="top" href="#" ui-sref="admin.booklist-edit({booklistId: booklist._id})" class="btn btn-danger pull-right"><i class="fa fa-pencil"></i> Editar</a> 
            <a ng-show="booklist.status !== 'blocked'" tooltip="Bloquear lista de obras" tooltip-placement="top" href="#" ng-click="setBlocked()" class="btn btn-danger pull-right" style="margin-right:2px;"><i class="glyphicon glyphicon-ban-circle"></i> Bloquear</a> 
            <a ng-show="booklist.status === 'blocked'" tooltip="Publicar lista de obras" tooltip-placement="top" href="#" ng-click="setPublic()" class="btn btn-danger pull-right" style="margin-right:2px;"><i class="glyphicon glyphicon-eye-open"></i> Publicar</a> 
        </div>
      </div>  
      
      <div class="booklist-description row">
        <div class="col-sm-12 col-md-12 col-xs-12">
            <h3>{{ booklist.title | htmlLimit: 200 }}</h3>
            <h5 ng-show="booklist.description">Descripción</h5>
            <p ng-show="booklist.description"><small><em class="text-muted">{{booklist.description}}</em></small></p>
            <div style="margin-top:10px">
              <ul class="list-inline" ng-if="booklist.tags">
                <li style="margin-top:10px" ng-repeat="tag in booklist.tags track by $id(tag)"><span class="label label-default"><span class="glyphicon glyphicon-tag"></span> {{tag.name}}</span></li>
              </ul>
            </div>
        </div>
      </div>
      <hr>

      <div ng-repeat="book in booklist.books">
       <div class="row">
         <div class="col-sm-3 col-xs-3 col-md-2">
           <a ng-href="{{book.slug | mountRecord }}" target="_blank">
             <img ng-src="{{book.uuid | mountCover }}" alt="{{book.title}}" class="img-responsive border-cover">
           </a>
         </div>
         <div class="col-sm-9 col-xs-9 col-md-10">
           <h3 ng-if="book.title.length <= 200" class="title">{{ book.title }}</h3>
           <h4 ng-if="book.title.length > 200" class="title">{{ book.title }}</h4>
           <h4 class="authors" ng-show="book.authors" ng-bind="book.authors | htmlLimit: 200"></h4>
           <p class="text-muted" ng-show="book.reproduction">{{book.reproduction | htmlLimit: 200}}</p>
           <p class="text-muted">
             <span ng-show="book.language" class="label label-default">{{book.language}}</span>
             <span class="label label-default" ng-show="book.mediaType" ng-switch on="book.mediaType">
                <span ng-switch-when="audio">
                    <i class="glyphicon glyphicon-headphones"></i> {{book.mediaType}}
                </span>
                <span ng-switch-when="video">
                    <i class="glyphicon glyphicon-film"></i> {{book.mediaType}}
                </span>
                <span ng-switch-when="texto">
                    <i class="glyphicon glyphicon-book"></i> {{book.mediaType}}
                </span>
                <span ng-switch-default>
                    {{book.mediaType}}
                </span>
            </span>
           </p>
           <p class="text-muted" ng-show="book.comments">{{book.comments}}</p>
         </div>
       </div> <!-- row -->
       <hr>
      </div>
      
      <div style="margin-top:20px;" ng-show="group.comments.length > 0">
        <h4>Actividad reciente</h4>	
        <div ng-repeat="comment in booklist.comments" class="media">
           
            <div class="media-left">
              <img style="width: 64px;height: 64px;" ng-src="{{comment.user.profileImageURL}}" alt="{{comment.user.displayName}}" class="header-profile-image" />
            </div>
            <div class="media-body">
                <small>
                <em class="text-muted">
                Añadido el
                <span ng-bind="comment.created | date:'dd/MM/yyyy'"></span>
                 por
                <span ng-bind="comment.user.displayName"></span>
                </em>
                <a href="#" tooltip="Eliminar comentario"
                   confirm="¿Estás seguro que deseas eliminar el comentario?"
                   ng-click="removeComment(comment._id, $index)" class="btn btn-danger btn-xs"><span class="glyphicon glyphicon-trash"></span></a>    
                </small>
                <p>
                    <a href="#" editable-textarea="comment.content" e-rows="7" e-cols="40" onbeforesave="updateComment(comment._id, $data)">
                        <pre>{{ comment.content || 'comentario vacío' }}</pre>
                    </a>
                </p>
            </div>
        </div>
     </div>   
        
        
    </div>
</div>