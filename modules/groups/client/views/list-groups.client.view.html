<section ng-controller="GroupUserPaginationController" ng-init="init(10)">

    <div class="page-header">
        <div class="container">
            <h1><i class="fa fa-users"></i> Mis grupos</h1>
        </div>
    </div>    
    
    <div class="container">    

        <div class="row" ng-controller="GroupsController">
            <ul class="profileNav-list hidden-xs">
                <li class="profileNav-item pull-left">
                    <span class="profileNav-label">Grupos</span>
                    <span class="profileNav-value" data-is-compact="false">{{total}}</span>
                </li>
                <li class="profileNav-item pull-right">
                    <a tooltip="Crear grupo" tooltip-placement="top" href="#" ui-sref="groups.create" class="btn btn-danger"><i class="fa fa-plus"></i> Crear grupo</a> 
                </li>
                <li class="profileNav-item pull-right">
                    <a tooltip="Buscar grupos" tooltip-placement="top" href="#" ui-sref="groups.search" class="btn btn-danger"><i class="fa fa-search"></i> Buscar grupos</a> 
                </li>
            </ul>
        </div>
      
        <div class="row visible-xs">
            <div class="col-xs-12" style="text-align:center; margin-bottom:10px;">
                <button type="button" href="#" ui-sref="groups.create" class="btn btn-danger"><i class="fa fa-plus"></i> Crear grupo</button> 
                <a tooltip="Buscar grupos" tooltip-placement="top" href="#" ui-sref="groups.search" class="btn btn-danger"><i class="fa fa-search"></i> Buscar grupos</a> 
            </div>
        </div>  
      
        <div class="row">
            <div ng-repeat="group in pagedItems">
                <section class="widget">
                    <div class="widget-controls">
                        <!--<a href="#"><i class="fa fa-refresh"></i></a>
                        <a href="#" data-widgster="close"><i class="glyphicon glyphicon-remove"></i></a>-->
                        <span ng-switch on="group.type">
                            <span ng-switch-when="obra">
                              <i class="glyphicon glyphicon-book"></i> Obra
                            </span>
                            <span ng-switch-when="lista">
                              <i class="glyphicon glyphicon-th-list"></i> Lista
                            </span>
                            <span ng-switch-when="autor">
                              <i class="glyphicon glyphicon-pencil"></i> Autor
                            </span>
                            <span ng-switch-default>
                              <i class="fa fa-comments"></i> Tema
                            </span>
                        </span>
                    </div>
                    <div class="widget-body">
                        <div class="widget-top-overflow windget-padding-md clearfix bg-grey text-grey">
                            <a href="#" ui-sref="groups.view({groupId: group._id})">
                                <h3 class="mt-lg mb-lg"><span class="fw-semi-bold">Grupo</span> - {{ group.name | htmlLimit: 100 }}</h3>
                            </a>
                            <ul class="tags text-grey pull-right">
                                <li><a href="#" ui-sref="groups.view({groupId: group._id})">detalles</a></li>
                            </ul>
                        </div>
                        <div class="post-user mt-n-lg">
                            <span class="thumb-lg pull-left mr">
                                <!--<img ng-src="{{group.user.profileImageURL}}" alt="{{group.user.displayName}}" class="img-circle">-->
                            </span>
                            <h5 class="mt-sm fw-normal text-grey"><small class="text-grey text-light"><i class="fa fa-calendar"></i> &nbsp;<span ng-bind="group.created | date:'dd/MM/yyyy'"></span></small></h5>
                        </div>
                        <p class="text-light fs-mini m" ng-bind-html="group.content | htmlLimit:150"></p>
                    </div>
                </section>
            </div>
        </div>

        <pagination ng-show="pagedItems.length > 0" total-items="total" ng-model="currentPage" ng-change="pageChanged()" first-text="Primero" previous-text="Anterior" next-text="Siguiente" last-text="Último" boundary-links="true" max-size="8" items-per-page="itemsPerPage"></pagination>  
    
        <div class="alert alert-warning text-center" ng-show="pagedItems.length === 0">
            No has creado ningún grupo todavía, ¿<a ui-sref="groups.create">deseas crear uno</a>?
        </div>
    </div> 
</section>
